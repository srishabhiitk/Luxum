<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Luxum: mpidata Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Luxum
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmpidata-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mpidata Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to store MPI derived datatypes for individual arrays.  
 <a href="classmpidata.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="mpidata_8h_source.html">lib/mpidata.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adc5f562bf45ae213dded9c03f7d5195b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmpidata.html#adc5f562bf45ae213dded9c03f7d5195b">mpidata</a> (blitz::Array&lt; double, 3 &gt; inputArray, bool xStag_, bool yStag_, const <a class="el" href="classparallel.html">parallel</a> &amp;parallelData, const <a class="el" href="classgrid.html">grid</a> &amp;gridData_)</td></tr>
<tr class="memdesc:adc5f562bf45ae213dded9c03f7d5195b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor of the mpidata class.  <a href="#adc5f562bf45ae213dded9c03f7d5195b">More...</a><br /></td></tr>
<tr class="separator:adc5f562bf45ae213dded9c03f7d5195b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebe34d26110d4efa596e8b836de09bf1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmpidata.html#aebe34d26110d4efa596e8b836de09bf1">createSubarrays</a> (const bool xStag, const bool yStag, const bool zStag)</td></tr>
<tr class="memdesc:aebe34d26110d4efa596e8b836de09bf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to create the subarray MPI_Datatypes.  <a href="#aebe34d26110d4efa596e8b836de09bf1">More...</a><br /></td></tr>
<tr class="separator:aebe34d26110d4efa596e8b836de09bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c722bece264a65a06c1843ab0ae9ae3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmpidata.html#a8c722bece264a65a06c1843ab0ae9ae3">syncData</a> ()</td></tr>
<tr class="memdesc:a8c722bece264a65a06c1843ab0ae9ae3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to sync data across all MPI nodes.  <a href="#a8c722bece264a65a06c1843ab0ae9ae3">More...</a><br /></td></tr>
<tr class="separator:a8c722bece264a65a06c1843ab0ae9ae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to store MPI derived datatypes for individual arrays. </p>
<p>Since the solver uses staggered grids, the data of scalar fields are stored in arrays of different sizes in each direction depending on whether the field is staggered or not in that direction. As a result, the limits of the sub-arrays to be sent across inter-processor boundaries is different for different arrays. Hence the <b>mpidata</b> class contains MPI_SUBARRAY derived datatypes to be initialized along with different fields in order to store their sub-arrays for inter-processor communication. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="adc5f562bf45ae213dded9c03f7d5195b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mpidata::mpidata </td>
          <td>(</td>
          <td class="paramtype">blitz::Array&lt; double, 3 &gt;&#160;</td>
          <td class="paramname"><em>inputArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>xStag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>yStag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classparallel.html">parallel</a> &amp;&#160;</td>
          <td class="paramname"><em>parallelData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgrid.html">grid</a> &amp;&#160;</td>
          <td class="paramname"><em>gridData_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor of the mpidata class. </p>
<p>The short constructor of mpidata class merely resizes the array of shareRanks and MPI_Request datatypes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inputArray</td><td>is the blitz array whose sub-arrays have to be created and synchronised across processors. </td></tr>
    <tr><td class="paramname">xStag</td><td>is boolean representing whether the scalar field provided is staggered in X direction. </td></tr>
    <tr><td class="paramname">yStag</td><td>is boolean representing whether the scalar field provided is staggered in Y direction. </td></tr>
    <tr><td class="paramname">parallelData</td><td>is a const reference to the global data contained in the parallel class. </td></tr>
    <tr><td class="paramname">gridData</td><td>is a const reference to the grid information. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aebe34d26110d4efa596e8b836de09bf1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpidata::createSubarrays </td>
          <td>(</td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>xStag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>yStag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>zStag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to create the subarray MPI_Datatypes. </p>
<p>Function calculates the required subarrays that need to be shared across MPI nodes and stores them in MPI_Datatypes that can simply be used whenever syncing is required.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xStag</td><td>is boolean representing whether the scalar field provided is staggered in X direction. </td></tr>
    <tr><td class="paramname">yStag</td><td>is boolean representing whether the scalar field provided is staggered in Y direction. </td></tr>
    <tr><td class="paramname">zStag</td><td>is boolean representing whether the scalar field provided is staggered in Z direction. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8c722bece264a65a06c1843ab0ae9ae3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpidata::syncData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to sync data across all MPI nodes. </p>
<p>This is the core function of the mpidata class. The end slices of each sub-domain recieves data from their corresponding neighbouring sub-domains, while the interior slices of each sub-domain sends data to their corresponding neighbouring sub-domains.</p>
<p>All the data slices are send as subarray MPI derived data-types created in the <a class="el" href="classmpidata.html#aebe34d26110d4efa596e8b836de09bf1">createSubarrays</a> function. As a result, <a class="el" href="classmpidata.html#a8c722bece264a65a06c1843ab0ae9ae3">syncData</a> must be called only after the subarrays have been created.</p>
<p>The data transfer is implemented here with a mixture of blocking and non-blocking communication calls. The recieves are non-blocking, while the sends are blocking. This combination prevents inter-processor deadlock. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/rishabh/Luxum/lib/parallel/<a class="el" href="mpidata_8h_source.html">mpidata.h</a></li>
<li>/home/rishabh/Luxum/lib/parallel/<a class="el" href="mpidata_8cc.html">mpidata.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
